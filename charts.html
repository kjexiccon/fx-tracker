
<!DOCTYPE html>
<html>
<head>
  <title>FX Tracker Charts</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    h2 { margin-top: 2em; }
    canvas { max-width: 100%; margin-top: 20px; }
    .nav { margin-bottom: 1em; }
    .nav a { margin-right: 15px; }
  </style>
</head>
<body>
  <div class="nav">
    <a href="/dashboard"><button>Dashboard</button></a>
    <a href="/logout"><button>Logout</button></a>
  </div>

  <h2>MTM by Currency</h2>
  <canvas id="barChart"></canvas>

  <h2>Exposure by Currency</h2>
  <canvas id="pieChart"></canvas>

  <h2>MTM Trend (Daily)</h2>
  <canvas id="lineChart"></canvas>

  <script>
    const mtmByCurrency = {{ mtm_by_currency | tojson }};
    const exposureByCurrency = {{ exposure_by_currency | tojson }};
    const mtmTrend = {{ mtm_trend | tojson }};

    new Chart(document.getElementById('barChart'), {
      type: 'bar',
      data: {
        labels: Object.keys(mtmByCurrency),
        datasets: [{
          label: 'MTM (Gain/Loss)',
          data: Object.values(mtmByCurrency),
          backgroundColor: Object.values(mtmByCurrency).map(v => v >= 0 ? 'green' : 'red')
        }]
      }
    });

    new Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: {
        labels: Object.keys(exposureByCurrency),
        datasets: [{
          label: 'Exposure',
          data: Object.values(exposureByCurrency),
          backgroundColor: ['#007bff', '#ffc107', '#28a745', '#dc3545', '#17a2b8']
        }]
      }
    });

    new Chart(document.getElementById('lineChart'), {
      type: 'line',
      data: {
        labels: mtmTrend.map(x => x.date),
        datasets: [{
          label: 'MTM Trend',
          data: mtmTrend.map(x => x.mtm),
          borderColor: '#007bff',
          fill: false
        }]
      }
    });
  </script>
</body>
</html>


<!DOCTYPE html>
<html>
<head>
  <title>FX Tracker Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { font-family: sans-serif; margin: 2em; }
    .green { color: green; }
    .red { color: red; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; }
    th, td { padding: 8px; border: 1px solid #ccc; }
    input, select, button { margin: 5px; padding: 6px; }
    form { margin-bottom: 1em; }
    .top-bar { display: flex; justify-content: space-between; align-items: center; }
  </style>
</head>
<body>
  <div class="top-bar">
    <h2>Welcome, {{ user }}</h2>
    <a href="/logout"><button>Logout</button></a>
  </div>

  <form action="/add" method="POST">
    <input type="text" name="client" placeholder="Client Name" required>
    <select name="currency" required>
      <option value="">Currency</option>
      <option value="USD">USD</option>
      <option value="EUR">EUR</option>
      <option value="INR">INR</option>
      <option value="GBP">GBP</option>
      <option value="JPY">JPY</option>
    </select>
    <input type="number" step="0.01" name="amount" placeholder="Amount" required>
    <input type="number" step="0.0001" name="booking_rate" placeholder="Booking Rate" required>
    <select name="hedge_status" required>
      <option value="">Hedge Status</option>
      <option value="Hedged">Hedged</option>
      <option value="Unhedged">Unhedged</option>
    </select>
    <select name="booking_type" required>
      <option value="">Type</option>
      <option value="Export">Export</option>
      <option value="Import">Import</option>
      <option value="Forward">Forward</option>
    </select>
    <input type="text" name="notes" placeholder="Notes (optional)">
    <button type="submit">Add Booking</button>
  </form>

  <div>
    <a href="/download" target="_blank"><button>Download CSV</button></a>
    <a href="/reset" onclick="return confirm('Are you sure you want to delete all bookings?');"><button>Reset DB</button></a>
  </div>

  <h3>Current Bookings</h3>
  <table>
    <tr>
      <th>Client</th>
      <th>Currency</th>
      <th>Amount</th>
      <th>Booked Rate</th>
      <th>Live Rate</th>
      <th>MTM</th>
      <th>Hedge</th>
      <th>Type</th>
      <th>Date</th>
      <th>Notes</th>
    </tr>
    {% for b in bookings %}
    <tr>
      <td>{{ b["client"] }}</td>
      <td>{{ b["currency"] }}</td>
      <td>{{ b["amount"] }}</td>
      <td>{{ b["booking_rate"] }}</td>
      <td>{{ b["live_rate"] }}</td>
      <td class="{{ b['mtm_color'] }}">{{ b["mtm"] }}</td>
      <td>{{ b["hedge_status"] }}</td>
      <td>{{ b["booking_type"] }}</td>
      <td>{{ b["date"] }}</td>
      <td>{{ b["notes"] }}</td>
    </tr>
    {% endfor %}
  </table>
</body>
</html>
